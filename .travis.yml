# This is a sample build configuration for Docker.
# Check our guides at https://confluence.atlassian.com/x/O1toN for more examples.
# Only use spaces to indent your .yml configuration.
# -----
# You can specify a custom docker image from Docker Hub as your build environment.
#image: pmathia0/gcc-cmake-vulkan:latest

#pipelines:
# branches:
#  develop:
#    - step:
#        script:
#        - git submodule update --init
#        - cmake -DCMAKE_BUILD_TYPE=Release
#        - make

sudo: required

services:
    - docker

before_install:
- docker pull pmathia0/gcc-cmake-vulkan
- docker run -d -p 127.0.0.1:80:4567 pmathia0/gcc-cmake-vulkan /bin/sh -c "cd /root/gcc-cmake-vulkan; bundle exec foreman start;"

script:
   - git submodule update --init
   - cmake -DCMAKE_BUILD_TYPE=Release --target vulkan_microtests
   - make

